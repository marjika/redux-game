{"version":3,"sources":["features/player/sprite-sheet.png","features/player/reducer.js","features/map/reducer.js","config/store.js","config/constants.js","features/player/index.js","features/player/movement.js","features/map/index.js","data/maps/1/index.js","features/world/index.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","initialState","position","spriteLocation","direction","walkIndex","playerReducer","state","arguments","length","undefined","action","type","Object","objectSpread","payload","tiles","mapReducer","rootReducer","combineReducers","player","map","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","SPRITE_SIZE","MAP_HEIGHT","MAP_WIDTH","connect","getSpriteLocation","concat","dispatchMove","newPos","getState","getWalkIndex","dispatch","attemptMove","oldPos","getNewPosition","observeBoundaries","y","x","observeImpassable","addEventListener","e","preventDefault","keyCode","console","log","keycode","handleKeydown","handleMovement","props","react_default","a","createElement","style","top","left","backgroundImage","sprite","backgroundPosition","width","height","getTileSprite","MapTile","className","tile","MapRow","backgroundColor","border","row","World","margin","features_player","App","world","Component","ReactDOM","render","es","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.14c22aa4.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/sprite-sheet.080f7de2.png\";","const initialState = {\r\n    position: [0, 0],\r\n    spriteLocation: \"40px 40px\",\r\n    direction: \"east\", \r\n    walkIndex: 0\r\n}\r\n\r\nconst playerReducer = (state=initialState, action) => {\r\n    switch(action.type) {\r\n        case \"MOVE_PLAYER\":\r\n            return {\r\n                ...action.payload\r\n            }\r\n        default: \r\n            return state;\r\n    }\r\n}\r\n\r\nexport default playerReducer;","const initialState = {\r\n    tiles: []\r\n}\r\n\r\nconst mapReducer = (state=initialState, action) => {\r\n    switch(action.type) {\r\n        case \"ADD_TILES\":\r\n            return {\r\n                ...action.payload\r\n            }\r\n        default: \r\n            return state;\r\n    }\r\n}\r\n\r\nexport default mapReducer;","import { createStore, combineReducers } from \"redux\";\r\nimport playerReducer from \"../features/player/reducer\";\r\nimport mapReducer from \"../features/map/reducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n    player: playerReducer,\r\n    map: mapReducer\r\n})\r\n\r\nconst store = createStore(\r\n    rootReducer,\r\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n)\r\n\r\nexport default store;","export const SPRITE_SIZE = 40;\r\nexport const MAP_HEIGHT = SPRITE_SIZE * 12;\r\nexport const MAP_WIDTH = SPRITE_SIZE * 20;","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport sprite from \"./sprite-sheet.png\";\r\nimport handleMovement from \"./movement\"\r\n\r\nfunction Player(props) {\r\n    return (\r\n        <div\r\n            style={{\r\n                position: \"absolute\",\r\n                top: props.position[1],\r\n                left: props.position[0],\r\n                backgroundImage: `url(${sprite})`,\r\n                backgroundPosition: props.spriteLocation,\r\n                width: \"40px\",\r\n                height: \"40px\"\r\n            }}\r\n        />\r\n    )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        ...state.player\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(handleMovement(Player));","import store from \"../../config/store\";\r\nimport { SPRITE_SIZE } from \"../../config/constants\";\r\nimport { MAP_HEIGHT } from \"../../config/constants\";\r\nimport { MAP_WIDTH } from \"../../config/constants\";\r\n\r\nexport default function handleMovement(player) {\r\n\r\n    function getNewPosition(oldPos, direction) {\r\n        switch(direction) {\r\n            case \"WEST\":\r\n                return [ oldPos[0]-SPRITE_SIZE, oldPos[1] ]\r\n            case \"EAST\":\r\n                return [ oldPos[0]+SPRITE_SIZE, oldPos[1] ]\r\n            case \"NORTH\":\r\n                return [ oldPos[0], oldPos[1]-SPRITE_SIZE ]\r\n            case \"SOUTH\":\r\n                return [ oldPos[0], oldPos[1]+SPRITE_SIZE ]\r\n        }\r\n    }\r\n\r\n    function getSpriteLocation(direction, walkIndex) {\r\n        switch(direction) {\r\n            case \"NORTH\":\r\n                return `${SPRITE_SIZE*walkIndex}px ${SPRITE_SIZE*0}px`\r\n            case \"EAST\":\r\n                return `${SPRITE_SIZE*walkIndex}px ${SPRITE_SIZE*1}px`\r\n            case \"SOUTH\":\r\n                return `${SPRITE_SIZE*walkIndex}px ${SPRITE_SIZE*2}px`\r\n            case \"WEST\":\r\n                return `${SPRITE_SIZE*walkIndex}px ${SPRITE_SIZE*3}px`\r\n        }\r\n    }\r\n\r\n    function getWalkIndex() {\r\n        const walkIndex = store.getState().player.walkIndex;\r\n        return walkIndex >= 8 ? 0 : walkIndex + 1;\r\n    }\r\n\r\n    function observeBoundaries(oldPos, newPos) {\r\n        return (newPos[0] >= 0 && newPos[0] <= MAP_WIDTH-SPRITE_SIZE) &&\r\n                (newPos[1] >= 0 && newPos[1] <= MAP_HEIGHT-SPRITE_SIZE)\r\n    }\r\n\r\n    function observeImpassable(oldPos, newPos) {\r\n        const tiles = store.getState().map.tiles;\r\n        const y = newPos[1] / SPRITE_SIZE;\r\n        const x = newPos[0] / SPRITE_SIZE;\r\n        const nextTile = tiles[y][x];\r\n        return nextTile < 5;\r\n    }\r\n\r\n    function dispatchMove(direction, newPos) {\r\n           const walkIndex = getWalkIndex();\r\n           store.dispatch({\r\n            type: \"MOVE_PLAYER\",\r\n            payload: {\r\n                position: newPos,\r\n                direction: direction,\r\n                walkIndex,\r\n                spriteLocation: getSpriteLocation(direction, walkIndex)\r\n            }\r\n        })\r\n    }\r\n\r\n    function attemptMove(direction) {\r\n        const oldPos = store.getState().player.position;\r\n        const newPos = getNewPosition(oldPos, direction);\r\n\r\n        if (observeBoundaries(oldPos, newPos) && observeImpassable(oldPos, newPos)) {\r\n            dispatchMove(direction, newPos)\r\n        }\r\n    }\r\n\r\n    function handleKeydown(e) {\r\n        e.preventDefault();\r\n\r\n        switch(e.keyCode) {\r\n            case 37:\r\n                return attemptMove(\"WEST\")\r\n            case 38:\r\n                return attemptMove(\"NORTH\")\r\n            case 39:\r\n                return attemptMove(\"EAST\")\r\n            case 40:\r\n                return attemptMove(\"SOUTH\")\r\n            default:\r\n                console.log(e.keycode)\r\n        }\r\n    }\r\n\r\n    window.addEventListener(\"keydown\", (e) => {\r\n        handleKeydown(e);\r\n    });\r\n\r\n    return player;\r\n}","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { SPRITE_SIZE } from \"../../config/constants\"\r\n\r\nimport \"./style.css\";\r\n\r\nfunction getTileSprite(type) {\r\n    switch(type) {\r\n        case 0:\r\n            return \"grass\"\r\n        case 3:\r\n            return \"tree\"\r\n        case 4:\r\n            return \"chest\"\r\n        case 5:\r\n            return \"rock\"\r\n        case 6:\r\n            return \"tree\"\r\n    }\r\n}\r\n\r\nfunction MapTile(props) {\r\n    return <div \r\n        className={`tile ${getTileSprite(props.tile)}`}\r\n        style={{\r\n            height: SPRITE_SIZE,\r\n            width: SPRITE_SIZE\r\n        }}\r\n    />\r\n}\r\n\r\nfunction MapRow(props) {\r\n    return <div \r\n        className=\"row\"\r\n        style={{\r\n            height: SPRITE_SIZE\r\n        }}\r\n        >\r\n    {\r\n        props.tiles.map(tile => <MapTile tile={tile} />)\r\n\r\n    }\r\n    </div>\r\n}\r\n\r\nfunction Map(props) {\r\n    return (\r\n        <div\r\n            style={{\r\n                position: \"relative\",\r\n                top: \"0px\",\r\n                left: \"0px\",\r\n                width: \"800px\",\r\n                height: \"480px\",\r\n                backgroundColor: \"green\",\r\n                border: \"4px solid white\"\r\n            }}        \r\n        >\r\n            {\r\n                props.tiles.map( row => <MapRow tiles={row} /> )\r\n            }\r\n        </div>        \r\n    )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        tiles: state.map.tiles\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Map);","export const tiles = [\r\n    [0,0,5,6,5,6,0,5,0,0,0,0,0,0,5,6,6,6,6,6],\r\n    [0,0,6,5,6,6,0,0,0,0,0,0,0,0,0,6,5,6,6,6],\r\n    [0,0,0,6,6,6,5,0,0,0,0,0,0,0,0,6,6,0,6,6],\r\n    [0,0,0,0,0,5,6,0,0,0,0,0,5,0,0,0,0,0,6,0],\r\n    [0,6,6,0,0,0,5,5,5,0,0,0,0,0,0,0,0,0,0,0],\r\n    [5,0,5,6,0,0,0,0,0,0,0,0,0,0,0,0,6,6,6,6],\r\n    [6,5,6,0,0,0,0,0,0,0,0,0,0,0,0,6,6,6,6,6],\r\n    [6,6,5,6,0,0,6,6,0,0,0,0,0,6,6,6,0,0,0,6],\r\n    [6,6,6,0,0,0,0,6,6,0,0,0,0,6,5,6,0,4,0,6],\r\n    [6,6,6,0,0,0,0,0,0,0,0,0,0,0,6,6,3,6,6,6],\r\n    [5,6,6,6,0,0,5,5,5,0,0,0,0,0,0,3,3,6,6,5],\r\n    [0,6,6,0,6,6,5,5,5,0,0,0,0,0,0,0,6,6,6,6]\r\n]\r\n","import React from \"react\";\r\nimport Player from \"../player\";\r\nimport Map from \"../map\";\r\n\r\nimport { tiles } from \"../../data/maps/1\"\r\nimport store from \"../../config/store\"\r\n\r\nfunction World(props) {\r\n    store.dispatch({ type: \"ADD_TILES\", payload: {\r\n        tiles\r\n    }})\r\n\r\n    return (\r\n        <div\r\n            style={{\r\n                position: \"relative\",\r\n                width: \"800px\",\r\n                height: \"400px\",\r\n                margin: \"20px auto\"\r\n            }}\r\n        >\r\n             <Map />\r\n            <Player />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default World;","import React, { Component } from 'react';\nimport World from \"./features/world\";\n\nclass App extends Component {\n  render() {\n    return (\n      <div>\n        <World />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { Provider } from \"react-redux\";\n\nimport store from \"./config/store\";\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>, \n    document.getElementById('root'));\n\n"],"sourceRoot":""}